define("gallery/scrollmonitor/1.0.0/scrollmonitor",["jquery"],function(a,b,c){(function(b){"undefined"!=typeof define&&define.amd?define(["jquery"],b):"undefined"!=typeof c&&c.exports?(a("jquery"),c.exports=b($)):window.scrollMonitor=b($)})(function(a){function q(){if(b.viewportTop=c.scrollTop(),b.viewportBottom=b.viewportTop+b.viewportHeight,b.documentHeight=d.height(),b.documentHeight!==n){for(p=e.length;p--;)e[p].recalculateLocation();n=b.documentHeight}}function r(){b.viewportHeight=c.height(),q(),v()}function t(){clearTimeout(s),s=setTimeout(r,100)}function v(){for(u=e.length;u--;)e[u].update();for(u=e.length;u--;)e[u].triggerCallbacks()}function w(c,d){function u(a){if(0!==a.length)for(s=a.length;s--;)t=a[s],t.callback.call(e,o),t.isOne&&a.splice(s,1)}var e=this;this.watchItem=c,this.offsets=d?d===+d?{top:d,bottom:d}:d:{top:0,bottom:0},this.callbacks={},m.forEach(function(a){e.callbacks[a]=[]}),this.locked=!1;var s,t,n=this.isInViewport,p=this.isFullyInViewport,q=this.isAboveViewport,r=this.isBelowViewport;this.triggerCallbacks=function(){switch(this.isInViewport&&!n&&u(this.callbacks[g]),this.isFullyInViewport&&!p&&u(this.callbacks[h]),this.isAboveViewport!==q&&this.isBelowViewport!==r&&(u(this.callbacks[f]),p||this.isFullyInViewport||(u(this.callbacks[h]),u(this.callbacks[j])),n||this.isInViewport||(u(this.callbacks[g]),u(this.callbacks[i]))),!this.isFullyInViewport&&p&&u(this.callbacks[j]),!this.isInViewport&&n&&u(this.callbacks[i]),this.isInViewport!==n&&u(this.callbacks[f]),!0){case n!==this.isInViewport:case p!==this.isFullyInViewport:case q!==this.isAboveViewport:case r!==this.isBelowViewport:u(this.callbacks[l])}n=this.isInViewport,p=this.isFullyInViewport,q=this.isAboveViewport,r=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var c=this.top,d=this.bottom;if(this.watchItem.nodeName){var e=this.watchItem.style.display;"none"===e&&(this.watchItem.style.display="");var f=a(this.watchItem).offset();this.top=f.top,this.bottom=f.top+this.watchItem.offsetHeight,"none"===e&&(this.watchItem.style.display=e)}else this.watchItem===+this.watchItem?this.top=this.bottom=this.watchItem>0?this.watchItem:b.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===c&&void 0===d||this.top===c&&this.bottom===d||u(this.callbacks[k])}},this.recalculateLocation(),this.update()}function x(a){o=a,q(),v()}var b={},c=a(window),d=a(document),e=[],f="visibilityChange",g="enterViewport",h="fullyEnterViewport",i="exitViewport",j="partiallyExitViewport",k="locationChange",l="stateChange",m=[f,g,h,i,j,k,l];b.viewportTop,b.viewportBottom,b.documentHeight,b.viewportHeight=c.height();var n,o,p,s,u;return w.prototype={on:function(a,b,c){switch(!0){case a===f&&!this.isInViewport&&this.isAboveViewport:case a===g&&this.isInViewport:case a===h&&this.isFullyInViewport:case a===i&&this.isAboveViewport&&!this.isInViewport:case a===j&&this.isAboveViewport:if(b(),c)return}if(!this.callbacks[a])throw new Error("Tried to add a scroll monitor listener of type "+a+". Your options are: "+m.join(", "));this.callbacks[a].push({callback:b,isOne:c})},off:function(a,b){if(!this.callbacks[a])throw new Error("Tried to remove a scroll monitor listener of type "+a+". Your options are: "+m.join(", "));for(var d,c=0;d=this.callbacks[a][c];c++)if(d.callback===b){this.callbacks[a].splice(c,1);break}},one:function(a,b){this.on(a,b,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<b.viewportTop,this.isBelowViewport=this.bottom>b.viewportBottom,this.isInViewport=this.top<=b.viewportBottom&&this.bottom>=b.viewportTop,this.isFullyInViewport=this.top>=b.viewportTop&&this.bottom<=b.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var a=e.indexOf(this),b=this;e.splice(a,1),m.forEach(function(a){b.callbacks[a].length=0})},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}},m.forEach(function(a){w.prototype[a]=function(b,c){this.on.call(this,a,b,c)}}),q(),c.on("scroll",x),c.on("resize",t),b.beget=function(b,c){"string"==typeof b&&(b=a(b)[0]),b instanceof jQuery&&(b=b[0]);var d=new w(b,c);return e.push(d),d.update(),d},b.update=function(){o=null,q(),v()},b.recalculateLocations=function(){b.documentHeight=0,b.update()},b})});